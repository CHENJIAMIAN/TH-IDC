"use strict";(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[8199],{39414:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAeCAYAAAA/xX6fAAADEElEQVRIiaXWT4xdUxwH8M+beZ1atB11Nf7TqDBpmBuZG4RKK0rYsCASKhHSqmpEmghCwsaiFtX4E5KGWNSioguJBSHMghByF70LGm0TsRjCzBVRNVS1Fvc8c3rd1/fmzTe5ub/z+57f+b7fOb/fPa81MzFuAEziSkxjTZIXP/UbONSDX9PFfzVGcQmW18kyS28ps3R4PoIZPsKneLaBn43s4zWxe/A+vi2z9M5+BW/G+mA/g5U1fjq8/8aRSGwJXgnDVehbcCemojk7a/wEViBJ8mIq8j9mbot/x/39Cs5iS7A/wws1/ghmcLjm3403g/10khezNV4rVOlp+LNB+Cp8FewLcbcquzHVNk/hGxR4J8mL/VBm6RgOJHlxvL5ga2ZifDG+xwE8FBaoYzu2YaSBi7ELW5O8OBY7w9m+iLVD2IuzcD2+xvPR3HOC74kGsfp2woM4VGbpZZHYBnyHB7BqCGUt6NzwHkWO1RE3qTrbFMtwOjar2qCDi5CXWXpBGK/EmR2yc4br8TqWROQk1kULbcQbtR/3ZJIX20Mmd2AP2oE7mOTFpYE7hLOxpRV92trhV/+C2/FutPBteK8m9gluwHCnOMosTbEvmvNwkhevlVm6ApK8mI7b4lgQg+ci/8sNYo8HsbfiSkzyolD1YgdPdYSSvJimuQ/Pw+XB/qu2ANxlrrA+rgcnebEDP4bh+WWWXhvz7XoArovsL3A0Gl+Dt6PxjWWWLlIdxc9JXuwO/r14JNhr8fmpBMci+8vIvgkf1ubeGx7YGvl/iOxlcUCT4KLIjnstUTXvrzjDXAbwaJIXr0bj+AvT6iX4TxfxPeGBiyPBXUlevFRbI66NE92I+eC+8P4gyYvN8wkcVHCD6ka5db6BgwgOq4pp3QCxjWfYCydUGQ6EXhn+0eD73x3XZxx6Z7gcS081oczSbnEDCW5zckP3i64XdZNgvB2Lw7MQnPS/piMYb1vX7RgQo2WW/rd+a2ZifBN2RBNGLDyrGEdVtw4cbuMKPQpjgRgxd6ZL29ivunj7KfeFYAi//QtGu8KoP1Ll7gAAAABJRU5ErkJggg=="},75779:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAPUlEQVQYlY3KyREAEBAAwSEp4a0cBcSLcuyh351K63yQ/JOAGkUBKoAXV/Likaz4JC2q6Y5m2qObZgwTwABv0QuT+RAjKwAAAABJRU5ErkJggg=="},35122:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAC20lEQVRIiaWWTUgVURTHf+++EmywXkIpZWGafWDWJiroYxFEhasIokVWlPaxatMqCIKytbiIlMKwosJVhPRBLSpaa1gUoYShqVRENdOnd16LOfM8M84zzQOXc+Y/5/7vuffMOXNTxrUkyCngJDA3hrcCRzVgHRNxSCUQNgEnklYRuQ/smCzhNuCBer4OPAaqY4ucA04DKaAe2AK4QFuc8DmwWux64LJ6txl4CBSEwQBbgUfK560mzACfxe4Dlo7bLLQDdWJXAb+Ap0Ax4AMtM5RzRtm9CWThQqGsBW5ax5SnPb8IyFrHuJpQ772AZClU9u/cRMd8C+1oisYkNQk8F0za82vSnl8RAf9D3gElac9/AiwT4qZ8EU5GBoHSkEykNl+E4dYywGGCb7OH6JargXvAcSH2gTv5CEdFtwB7gNfASoLPJJQiAOuYi3pivi2HhEtEF4v+qXyySRP/teWvor0YniNPe34DqvSmk+WXBGXaqrDt0yHMAENAP2Ol16EJ/SkSVgBdE5XexykSfgiNfKV3RNmLRMczOU/Z+5JWCQlXAM0KvyE6HfPXzbcB2JuP8K7CrgBnxbYx3UnQqXMLpz0/+t8xrt1tXJuV8cK4FhkHjGtHBPeMa8+od21qTnM2myUcGNfeVi93yoRahenRqEj/CDasCVPGtb1AJUFVzJHA+4HF8fMRKQVGCFr/JsEWWMcMhWc4S8AvalI+MoCFogcUluvkhrHvqVSRd09A+Er0GoV90oTPxJ4JHBP7kHZSchD4AawiaGcA3dYxud2ljGurgDfyPAqUE3TjIqBRIhkAzhM0BAj+ipVi11nHXMstKRlrV5nsMa4tU9nUo9C4tkP59ukMh1kOuYeBErEtcBW4RfAvng/sAvYTLb8y65hBfSaasAa4BKxLOLu4vCeo/c74ZUk/9QDrCa5yiXc8kQvAcoIyHCdJ1zmADcBGgq4zG/guUXURrftx17m/rRREYASS1UQAAAAASUVORK5CYII="},68199:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showPage?r("div",{staticClass:"room-index"},[t.hasAuth?t._e():r("h2",{staticClass:"auth-tip"},[t._v("权限不足,请联系管理员")]),r("div",{staticClass:"room-index-self"},[r("div",{staticClass:"row1"},[r("div",{ref:"btnsOut",staticClass:"btns"},[t.showBtns&&!t.isOnlyOneDeviceGroup?[t._l(t.deviceGroupList.slice(0,4),(function(e){return r("el-button",{key:e.id,staticClass:"el-button-custom",class:{active:e.name==t.activeDeviceGroupName},on:{"hook:mounted":t.btnsOutUpdated,"hook:updated":t.btnsOutUpdated,click:function(o){return t.routeToDeviceGroup(e)}}},[t._v(t._s(e.name))])})),t.deviceGroupList.slice(4).length>0?r("el-popover",{attrs:{width:t.popoverWidth,placement:"bottom-end",trigger:"hover","popper-class":"untransparent"},model:{value:t.moreBtnsVisible,callback:function(e){t.moreBtnsVisible=e},expression:"moreBtnsVisible"}},[r("div",{staticClass:"btns-fake"},t._l(t.deviceGroupList.slice(4),(function(e){return r("span",{key:e.id,staticClass:"btn-as-txt",class:{"active-txt":e.name==t.activeDeviceGroupName},on:{click:function(o){return t.routeToDeviceGroup(e)}}},[t._v(t._s(e.name))])})),0),r("img",{staticStyle:{cursor:"pointer"},style:t.moreBtnsVisible?"transform: rotate(225deg)":"transform: rotate(45deg)",attrs:{slot:"reference",width:"10",src:o(75779)},slot:"reference"})]):t._e()]:t._e()],2),t.hasAuth?[r("div",{staticClass:"img-container"},[r("img",{attrs:{width:"20",src:o(35122)}}),r("span",[t._v(" "+t._s(t.temperature))])]),r("div",{staticClass:"img-container"},[r("img",{attrs:{width:"25",src:o(39414)}}),r("span",[t._v("告警 "),r("span",{staticStyle:{color:"#ea2d2a"}},[t._v(t._s(t.alarmCount))]),t._v(" 条")])])]:t._e()],2),r("router-view")],1)]):t._e()},i=[],s=o(88521),a={name:"room",data(){return{showPage:!1,hasAuth:!0,moreBtnsVisible:!1,floorId:"",floorName:"",roomId:"",roomName:"",roomImage:"",temperature:"",alarmCount:"",deviceGroupList:[],popoverWidth:300}},computed:{activeDeviceGroupName(){return this.$route.params.deviceGroupName?this.$route.params.deviceGroupName.trim():""},isOnlyOneDeviceGroup(){return this.roomName.includes("IDC")},showBtns(){return!this.roomName.includes("空调")},btnsFakeStye(){const t=this.deviceGroupList.slice(4).length;let e="1fr ";if(t>4)e="1fr 1fr 1fr 1fr";else for(let o=0;o<t-1;o++)e+="1fr ";return{"grid-template-columns":e}}},async created(){const{floorId:t,floorName:e,roomId:o,roomName:r}=this.$route.params;Object.assign(this,{floorId:t,floorName:e,roomId:o,roomName:r}),this.$route.meta.title=r;try{const t=await(0,s.w8)({id:this.roomId});let{id:e,name:o,roomCode:r,roomImage:i,roomType:a,deviceGroupList:n}=t.data;if(this.hasAuth=!0,n||(this.$message("该房间未配置设备组"),n=[]),Object.assign(this,{roomImage:i,deviceGroupList:n}),0!==n.length&&(1==n.length||!this.$route.params.deviceGroupName)){const t=n[0];this.routeToDeviceGroup(t)}}catch(i){this.hasAuth=!1,console.log(i)}finally{this.showPage=!0}},mounted(){},methods:{btnsOutUpdated(){const t=getComputedStyle(this.$refs.btnsOut).width.slice(0,-2);this.popoverWidth=+t+3},routeToDeviceGroup(t){this.$store.commit("app/SET_CURRENT_DEVICEGROUP",{roomImage:this.roomImage,deviceGroup:t}),this.$router.push(`/device-monitor/floor/${this.floorId}/${this.floorName}/room/${this.roomId}/${encodeURIComponent(this.roomName)}/device-group/${t.id}/${encodeURIComponent(t.name)}\n        `)}}},n=a,c=o(1001),u=(0,c.Z)(n,r,i,!1,null,"3921e8ee",null),m=u.exports},88521:function(t,e,o){o.d(e,{Be:function(){return s},gS:function(){return n},oK:function(){return c},p6:function(){return a},w8:function(){return i}});var r=o(25972);function i(t){return(0,r.Z)({url:"/admin/devicemonitor/deviceGroup/listAll",method:"post",data:t})}function s(t){return(0,r.Z)({url:"/admin/devicemonitor/room/listAll",method:"post",data:t})}function a(t){return(0,r.Z)({url:"/admin/devicemonitor/floor/listAll",method:"post",data:t})}function n(t){return(0,r.Z)({url:"/admin/devicemonitor/deviceGroupType/getData",method:"post",data:t})}function c(t){return(0,r.Z)({url:"/admin/devicemonitor/History/getData",method:"post",data:t})}}}]);