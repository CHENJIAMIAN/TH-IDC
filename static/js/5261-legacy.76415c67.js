(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[5261],{65261:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"app-container auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?a("div",{staticClass:"content",staticStyle:{overflow:"auto","padding-right":"5px"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms1",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"120px"}},[a("h3",{staticStyle:{color:"#31c6f1"}},[e._v("实时数据存储方式")]),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"实时存储方式",prop:"realtime_store_type"}},[a("el-radio-group",{staticClass:"new-el-radio-group",staticStyle:{width:"100%"},model:{value:e.forms.realtime_store_type,callback:function(t){e.$set(e.forms,"realtime_store_type",t)},expression:"forms.realtime_store_type"}},[a("el-radio",{attrs:{border:"",label:"1"}},[e._v("组合存储")]),a("el-radio",{attrs:{border:"",label:"2"}},[e._v("全量实时存储")]),a("el-radio",{attrs:{border:"",label:"3"}},[e._v("不存储")])],1)],1)],1)],1),1==e.forms.realtime_store_type?a("el-card",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"周期存储(分钟)",prop:"cyclestore"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.cyclestore,callback:function(t){e.$set(e.forms,"cyclestore",t)},expression:"forms.cyclestore"}})],1),a("el-form-item",{attrs:{label:"",prop:"cyclestore_has"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.$refs["forms1"].clearValidate()}},model:{value:e.forms.cyclestore_has,callback:function(t){e.$set(e.forms,"cyclestore_has",t)},expression:"forms.cyclestore_has"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"变化率存储(%)",prop:"changerate"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.changerate,callback:function(t){e.$set(e.forms,"changerate",t)},expression:"forms.changerate"}})],1),a("el-form-item",{attrs:{label:"",prop:"changerate_has"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.$refs["forms1"].clearValidate()}},model:{value:e.forms.changerate_has,callback:function(t){e.$set(e.forms,"changerate_has",t)},expression:"forms.changerate_has"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"变化大小存储",prop:"changesize"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.changesize,callback:function(t){e.$set(e.forms,"changesize",t)},expression:"forms.changesize"}})],1),a("el-form-item",{attrs:{label:"",prop:"changesize_has"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.$refs["forms1"].clearValidate()}},model:{value:e.forms.changesize_has,callback:function(t){e.$set(e.forms,"changesize_has",t)},expression:"forms.changesize_has"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"测点实时存储",prop:"points_has"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.forms.points_has,callback:function(t){e.$set(e.forms,"points_has",t)},expression:"forms.points_has"}})],1),a("el-form-item",[a("el-button",{attrs:{title:"测点选择",icon:"el-icon-circle-plus-outline",type:"primary",plain:""},on:{click:e.handleCDDialog}},[e._v("测点选择")])],1)],1)],1):e._e()],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"180px"}},[a("el-divider",{staticStyle:{margin:"10px 0"}}),a("h3",{staticStyle:{color:"#31c6f1"}},[e._v("存储时间")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"全量实时数据(月)",prop:"all_realtime_data"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.all_realtime_data,callback:function(t){e.$set(e.forms,"all_realtime_data",t)},expression:"forms.all_realtime_data"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组合实时数据(月)",prop:"union_realtime_data"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.union_realtime_data,callback:function(t){e.$set(e.forms,"union_realtime_data",t)},expression:"forms.union_realtime_data"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规整数据(年)",prop:"regular_data"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.regular_data,callback:function(t){e.$set(e.forms,"regular_data",t)},expression:"forms.regular_data"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"告警事件(年)",prop:"alert_data"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.alert_data,callback:function(t){e.$set(e.forms,"alert_data",t)},expression:"forms.alert_data"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作日志(年)",prop:"action_log"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.action_log,callback:function(t){e.$set(e.forms,"action_log",t)},expression:"forms.action_log"}})],1)],1)],1),a("el-divider",{staticStyle:{margin:"10px 0"}}),a("h3",{staticStyle:{color:"#31c6f1"}},[e._v("磁盘")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"磁盘总容量(GB)",prop:"store_all_size"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.store_all_size,callback:function(t){e.$set(e.forms,"store_all_size",t)},expression:"forms.store_all_size"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"磁盘已使用容量(GB)",prop:"store_use_size"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.store_use_size,callback:function(t){e.$set(e.forms,"store_use_size",t)},expression:"forms.store_use_size"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"磁盘空间占用报警阀值(%)",prop:"store_use_alert"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.store_use_alert,callback:function(t){e.$set(e.forms,"store_use_alert",t)},expression:"forms.store_use_alert"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"磁盘容量告警",prop:"store_alert_switch"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.forms.store_alert_switch,callback:function(t){e.$set(e.forms,"store_alert_switch",t)},expression:"forms.store_alert_switch"}},[e._v("当磁盘空间占用达到设定阈值时报警")])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"数据删除",prop:"delete_data_switch"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.forms.delete_data_switch,callback:function(t){e.$set(e.forms,"delete_data_switch",t)},expression:"forms.delete_data_switch"}},[e._v("基于存储时间要求自动删除")])],1)],1)],1)],1)],1):e._e(),a("el-dialog",{attrs:{visible:e.dialogCD.visible,width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialogCD,"visible",t)}}},[a("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"title-txt"},[e._v("绑定测点")]),a("img",{attrs:{src:r(1612)}})]),a("el-form",{ref:"dialogCDForm",staticStyle:{display:"grid","justify-content":"center"},attrs:{model:e.dialogCD.forms,rules:e.dialogCD.rules,"label-width":"100px"}},[a("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr"}},[a("el-form-item",{attrs:{label:"楼层",prop:"floorCode"}},[a("el-select",{attrs:{clearable:""},on:{change:function(t){e.$set(e.dialogCD.forms,"roomCode",""),e.$set(e.dialogCD.forms,"deviceGroupCode","")}},model:{value:e.dialogCD.forms.floorCode,callback:function(t){e.$set(e.dialogCD.forms,"floorCode",t)},expression:"dialogCD.forms.floorCode"}},e._l(e.floorOpts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.floorCode}})})),1)],1),a("el-form-item",{staticStyle:{"justify-self":"end"},attrs:{label:"房间",prop:"roomCode"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dialogCD.forms.roomCode,callback:function(t){e.$set(e.dialogCD.forms,"roomCode",t)},expression:"dialogCD.forms.roomCode"}},e._l(e.roomOpts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.roomCode}})})),1)],1)],1),a("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr"}},[a("el-form-item",{attrs:{label:"设备类型",prop:"deviceTypeId"}},[a("el-select",{attrs:{clearable:"","popper-class":"three-column"},on:{change:function(t){return e.$set(e.dialogCD.forms,"pointType","")}},model:{value:e.dialogCD.forms.deviceTypeId,callback:function(t){e.$set(e.dialogCD.forms,"deviceTypeId",t)},expression:"dialogCD.forms.deviceTypeId"}},e._l(e.deviceTypeOpts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"justify-self":"end"},attrs:{label:"测点类型",prop:"pointType"}},[a("el-select",{attrs:{clearable:""},model:{value:e.dialogCD.forms.pointType,callback:function(t){e.$set(e.dialogCD.forms,"pointType",t)},expression:"dialogCD.forms.pointType"}},e._l(e.pointTypeOpts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticStyle:{display:"grid","grid-template-columns":"1fr auto"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"deviceCode"}},[a("el-input",{model:{value:e.dialogCD.forms.deviceCode,callback:function(t){e.$set(e.dialogCD.forms,"deviceCode",t)},expression:"dialogCD.forms.deviceCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQueryNotBind}})],1)],1),a("el-form-item",{attrs:{label:"",prop:"","label-width":"20px"}},[a("el-transfer",{directives:[{name:"loading",rawName:"v-loading",value:e.transferLoading,expression:"transferLoading"}],staticClass:"custom-transfer",attrs:{filterable:"","filter-method":function(e,t){return!!t.name&&t.name.indexOf(e)>-1},titles:["未绑定","已绑定"],props:{key:"id",label:"name"},"filter-placeholder":"请输入",data:e.allPointOpts},model:{value:e.dialogCD.forms.poindIdArray,callback:function(t){e.$set(e.dialogCD.forms,"poindIdArray",t)},expression:"dialogCD.forms.poindIdArray"}})],1)],1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogCDSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},o=[],l=r(16198),i=r(23796),s=(r(35666),r(9653),r(21703),r(21249),r(92222),r(41539),r(94685)),n=r(99009),c=r(7169),d=r(98803),u={components:{pagination:s.Z},data:function(){var e,t=this,r=function(e,t,r){""===t||isNaN(t)||Number(t)<0||Number(t)>100?r(new Error("请输入小于100的非负数字")):r()};return e={showPage:!1,hasAuth:!0,floorOpts:[],roomOpts:[],deviceTypeOpts:[],pointTypeOpts:[],depOpts:[],firstMenuOpts:[],allPointOpts:[],secondMenuOpts:[],thirdMenuOpts:[]},(0,i.Z)(e,"pointTypeOpts",[]),(0,i.Z)(e,"filterForm",{pageNo:1,pageSize:10}),(0,i.Z)(e,"transferLoading",!0),(0,i.Z)(e,"listLoading",!0),(0,i.Z)(e,"listData",[]),(0,i.Z)(e,"listTotal",0),(0,i.Z)(e,"remouldAspirationOption",[]),(0,i.Z)(e,"forms",{}),(0,i.Z)(e,"rules",{realtime_store_type:[{required:!1,trigger:"blur",validator:d.Uz}],cyclestore:[{required:!0,trigger:"blur",validator:function(e,r,a){+t.forms.cyclestore_has||a(),""===r||isNaN(r)||Number(r)<0?a(new Error("请输入非负数字")):a()}}],changerate:[{required:!0,trigger:"blur",validator:function(e,r,a){+t.forms.changerate_has||a(),""===r||isNaN(r)||Number(r)<0?a(new Error("请输入非负数字")):a()}}],changesize:[{required:!0,trigger:"blur",validator:function(e,r,a){+t.forms.changesize_has||a(),""===r||isNaN(r)||Number(r)<0?a(new Error("请输入非负数字")):a()}}],all_realtime_data:[{required:!1,trigger:"blur",validator:d.Uz}],union_realtime_data:[{required:!1,trigger:"blur",validator:d.Uz}],regular_data:[{required:!1,trigger:"blur",validator:d.Uz}],alert_data:[{required:!1,trigger:"blur",validator:d.Uz}],action_log:[{required:!1,trigger:"blur",validator:d.Uz}],store_all_size:[{required:!1,trigger:"blur",validator:d.Uz}],store_use_size:[{required:!1,trigger:"blur",validator:d.Uz}],store_use_alert:[{required:!1,trigger:"blur",validator:r}],store_alert_switch:[{required:!1,trigger:"blur",validator:d.Uz}],delete_data_switch:[{required:!1,trigger:"blur",validator:d.Uz}]}),(0,i.Z)(e,"dialogCD",{visible:!1,forms:{},rules:{}}),e},watch:{"dialogCD.forms.deviceTypeId":function(e,t){var r=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r.pointTypeOpts=[],t.next=5,(0,c.W3)({deviceTypeId:e});case 5:a=t.sent,r.pointTypeOpts=a.data;case 7:case"end":return t.stop()}}),t)})))()},"dialogCD.forms.floorCode":function(e,t){var r=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r.roomOpts=[],r.deviceGroupOpts=[],t.next=6,(0,c.RE)({floorCode:e});case 6:a=t.sent,r.roomOpts=a.data;case 8:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(0,c.aJ)().then((function(t){return e.floorOpts=t.data})),(0,c.mA)().then((function(t){return e.deviceTypeOpts=t.data})),e.handleQuery();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{handleCDDialog:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogCD.forms={},e.dialogCD.visible=!0,e.transferLoading=!0,t.next=5,(0,n.s4)();case 5:return r=t.sent,e.pointNotBindDeviceGroupOpts=r.data,t.next=9,(0,n.CP)();case 9:a=t.sent,e.transferLoading=!1,e.pointBindDeviceGroupOpts=a.data,e.$set(e.dialogCD.forms,"poindIdArray",a.data.map((function(e){return e.id}))),e.allPointOpts=e.pointNotBindDeviceGroupOpts.concat(e.pointBindDeviceGroupOpts),e.$nextTick((function(t){return e.$refs["dialogCDForm"].clearValidate()}));case 15:case"end":return t.stop()}}),t)})))()},dialogCDSubmit:function(){var e=this;this.$refs["dialogCDForm"].validate((function(t,r){if(!t)return!1;(0,n.VF)(e.dialogCD.forms).then((function(t){e.$message.success("操作成功!"),e.$refs["dialogCDForm"].resetFields(),e.dialogCD.visible=!1,e.getList()}))}))},handleSubmit:function(){var e=this;this.$refs["forms"].validate((function(t,r){if(!t)return!1;e.$refs["forms1"].validate((function(t,r){if(!t)return!1;(0,n.Pt)(e.forms).then((function(t){e.$message.success("操作成功!"),e.handleQuery()}))}))}))},handleQueryNotBind:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.transferLoading=!0,t.next=3,(0,n.s4)(e.dialogCD.forms);case 3:r=t.sent,e.transferLoading=!1,e.pointNotBindDeviceGroupOpts=r.data,e.allPointOpts=e.pointNotBindDeviceGroupOpts.concat(e.pointBindDeviceGroupOpts);case 7:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){alertLevelDelete({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,n.UD)().then((function(t){e.hasAuth=!0,e.forms=t.data,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},m=u,f=r(1001),p=(0,f.Z)(m,a,o,!1,null,"5d753377",null),g=p.exports},55988:function(e,t,r){var a=r(70111),o=Math.floor;e.exports=Number.isInteger||function(e){return!a(e)&&isFinite(e)&&o(e)===e}},33161:function(e,t,r){var a=r(82109),o=r(55988);a({target:"Number",stat:!0},{isInteger:o})},98803:function(e,t,r){"use strict";r.d(t,{C0:function(){return n},Mj:function(){return l},Uz:function(){return c},eW:function(){return s},ed:function(){return i}});var a,o=r(23796),l=(r(33161),r(9653),r(21703),[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}]),i=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],s=(a={id:1,name:"母联柜"},(0,o.Z)(a,"id",2),(0,o.Z)(a,"name","直流操作电源柜"),(0,o.Z)(a,"id",3),(0,o.Z)(a,"name","变压器"),(0,o.Z)(a,"id",4),(0,o.Z)(a,"name","低压进线柜"),(0,o.Z)(a,"id",5),(0,o.Z)(a,"name","配电柜"),(0,o.Z)(a,"id",6),(0,o.Z)(a,"name","柴油发电机组"),(0,o.Z)(a,"id",7),(0,o.Z)(a,"name","蓄电池"),(0,o.Z)(a,"id",8),(0,o.Z)(a,"name","UPS主机"),(0,o.Z)(a,"id",9),(0,o.Z)(a,"name","UPS变换器"),(0,o.Z)(a,"id",10),(0,o.Z)(a,"name","UPS逆变器"),(0,o.Z)(a,"id",11),(0,o.Z)(a,"name","列头柜"),(0,o.Z)(a,"id",12),(0,o.Z)(a,"name","空调"),(0,o.Z)(a,"id",13),(0,o.Z)(a,"name","温湿度"),(0,o.Z)(a,"id",14),(0,o.Z)(a,"name","氢气探测器"),(0,o.Z)(a,"id",15),(0,o.Z)(a,"name","水浸"),[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}]),n=function(e,t,r){e.required||void 0!==t&&""!==t||r(),""===t||!Number.isInteger(+t)||+t<0?r(new Error("请输入整数值")):r()},c=function(e,t,r){""===t||isNaN(t)||Number(t)<0?r(new Error("请输入非负数字")):r()}}}]);