"use strict";(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[5749],{25749:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"alert-config"},[s("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"邮箱配置",name:"mail-config",lazy:""}},[s("mail-config")],1),s("el-tab-pane",{attrs:{label:"短信配置",name:"sms-config",lazy:""}},[s("sms-config")],1),s("el-tab-pane",{attrs:{label:"语音配置",name:"voice-config",lazy:""}},[s("voice-config")],1),s("el-tab-pane",{attrs:{label:"微信配置",name:"wechat-config",lazy:""}}),s("el-tab-pane",{attrs:{label:"钉钉配置",name:"dingding-config",lazy:""}})],1)],1)},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item"),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[a("el-table-column",{attrs:{prop:"smtp",label:"邮箱服务器"}}),a("el-table-column",{attrs:{prop:"auth",label:"是否验证"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[1==s.auth?a("span",[e._v("验证")]):a("span",[e._v("不验证")])]}}],null,!1,741748682)}),a("el-table-column",{attrs:{prop:"email",label:"邮箱地址"}}),a("el-table-column",{attrs:{prop:"username",label:"邮箱用户名"}}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{label:"状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleStatusChange(t,s)}},model:{value:s.status,callback:function(t){e.$set(s,"status",t)},expression:"row.status"}})]}}],null,!1,462391612)}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"161"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(s)}}}),a("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(s.id)}}})]}}],null,!1,1998501215)})],1):e._e(),a("el-dialog",{attrs:{visible:e.dialog.visible,top:"20vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),a("img",{attrs:{src:s(1612)}})]),a("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"邮箱服务器",prop:"smtp"}},[a("el-input",{model:{value:e.dialog.forms.smtp,callback:function(t){e.$set(e.dialog.forms,"smtp",t)},expression:"dialog.forms.smtp"}})],1),a("el-form-item",{attrs:{label:"是否验证",prop:"auth"}},[a("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.dialog.forms.auth,callback:function(t){e.$set(e.dialog.forms,"auth",t)},expression:"dialog.forms.auth"}},[a("el-radio",{attrs:{border:"",label:1}},[e._v("验证")]),a("el-radio",{attrs:{border:"",label:2}},[e._v("不验证")])],1)],1),a("el-form-item",{attrs:{label:"邮箱地址",prop:"email"}},[a("el-input",{model:{value:e.dialog.forms.email,callback:function(t){e.$set(e.dialog.forms,"email",t)},expression:"dialog.forms.email"}})],1),a("el-form-item",{attrs:{label:"邮箱用户名",prop:"username"}},[a("el-input",{model:{value:e.dialog.forms.username,callback:function(t){e.$set(e.dialog.forms,"username",t)},expression:"dialog.forms.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.dialog.forms.password,callback:function(t){e.$set(e.dialog.forms,"password",t)},expression:"dialog.forms.password"}})],1),e.dialog.forms.id?e._e():a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[a("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),a("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:0}},[e._v("禁用")])],1)],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.dialog.forms.remark,callback:function(t){e.$set(e.dialog.forms,"remark",t)},expression:"dialog.forms.remark"}})],1)],1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},r=[],o=s(94685),n=s(99009),d={components:{pagination:o.Z},data(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,dialog:{id:"",visible:!1,forms:{},rules:{smtp:[{required:!0,trigger:"blur",message:"请输入"}],auth:[{required:!0,trigger:"blur",message:"请输入"}],email:[{required:!0,trigger:"blur",message:"请输入"}],username:[{required:!0,trigger:"blur",message:"请输入"}],password:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},async created(){this.handleQuery()},mounted(){},methods:{handleStatusChange(e,t){(0,n.h8)({id:t.id,status:e}).then((e=>{this.getList()})).catch((s=>{t.status=0===e?1:0}))},dialogSubmit(){this.$refs["dialogForm"].validate(((e,t)=>{if(!e)return!1;{let e=null;e=this.dialog.forms.id?n.IJ:n.HU,e(this.dialog.forms).then((e=>{this.$message.success("操作成功!"),this.$refs["dialogForm"].resetFields(),this.dialog.visible=!1,this.getList()}))}}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},async handleDialog(e){if(e){const t=await(0,n.ci)({id:e.id});this.dialog.forms=t.data}else this.dialog.forms={status:1,auth:2};this.dialog.visible=!0,this.$nextTick((e=>this.$refs["dialogForm"].clearValidate()))},handleDel(e){this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,n.K4)({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,n.Qd)().then((e=>{this.hasAuth=!0,this.listData=e.data,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},m=d,u=s(1001),c=(0,u.Z)(m,l,r,!1,null,"376512ce",null),p=c.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showPage?s("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():s("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?s("div",{staticClass:"head"},[s("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"签名",prop:"sms_sign"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_sign,callback:function(t){e.$set(e.forms,"sms_sign",t)},expression:"forms.sms_sign"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"模板ID",prop:"sms_template_id"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_template_id,callback:function(t){e.$set(e.forms,"sms_template_id",t)},expression:"forms.sms_template_id"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"应用ID",prop:"sms_sdk_appid"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_sdk_appid,callback:function(t){e.$set(e.forms,"sms_sdk_appid",t)},expression:"forms.sms_sdk_appid"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"SecretID",prop:"sms_secretId"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_secretId,callback:function(t){e.$set(e.forms,"sms_secretId",t)},expression:"forms.sms_secretId"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"SecretKey",prop:"sms_secretKey"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_secretKey,callback:function(t){e.$set(e.forms,"sms_secretKey",t)},expression:"forms.sms_secretKey"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"EndPoint地址",prop:"sms_endpoint"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_endpoint,callback:function(t){e.$set(e.forms,"sms_endpoint",t)},expression:"forms.sms_endpoint"}})],1)],1)],1)],1):e._e()],1):e._e()},h=[],f=s(98803),b={components:{pagination:o.Z},data(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{sms_sign:[{required:!0,tiggter:"blur",message:"请输入"}],sms_template_id:[{required:!0,tiggter:"blur",message:"请输入"}],sms_sdk_appid:[{required:!0,tiggter:"blur",message:"请输入"}],sms_secretId:[{required:!0,tiggter:"blur",message:"请输入"}],sms_secretKey:[{required:!0,tiggter:"blur",message:"请输入"}],sms_endpoint:[{required:!0,tiggter:"blur",message:"请输入"}]},dialog:{id:"",visible:!1,forms:{},rules:{name:[{required:!0,trigger:"blur",message:"请输入"}],permission:[{required:!0,trigger:"blur",message:"请输入"}],menuType:[{required:!0,trigger:"change",message:"请输入"}],firstMenuId:[{required:!0,trigger:"blur",message:"请输入"}],secondMenuId:[{required:!0,trigger:"blur",message:"请输入"}],thirdMenuId:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},async created(){this.handleQuery()},mounted(){},methods:{handleSubmit(){this.$refs["forms"].validate(((e,t)=>{if(!e)return!1;(0,n.H9)(this.forms).then((e=>{this.$message.success("操作成功!"),this.handleQuery()}))}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},async handleDialog(e){this.dialog.forms=e?Object.assign(JSON.parse(JSON.stringify(e))):{},this.dialog.visible=!0,this.$nextTick((e=>this.$refs["dialogForm"].clearValidate()))},handleDel(e){this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{alertLevelDelete({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,n.hk)().then((e=>{this.hasAuth=!0,this.forms=e.data,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},_=b,v=(0,u.Z)(_,g,h,!1,null,"7837a80b",null),y=v.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showPage?s("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():s("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?s("div",{staticClass:"head"},[s("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"应用ID",prop:"sound_appid"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_appid,callback:function(t){e.$set(e.forms,"sound_appid",t)},expression:"forms.sound_appid"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"模板ID",prop:"sound_template_id"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_template_id,callback:function(t){e.$set(e.forms,"sound_template_id",t)},expression:"forms.sound_template_id"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"AppKey",prop:"sound_appkey"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_appkey,callback:function(t){e.$set(e.forms,"sound_appkey",t)},expression:"forms.sound_appkey"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"语音请求地址",prop:"sound_url"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_url,callback:function(t){e.$set(e.forms,"sound_url",t)},expression:"forms.sound_url"}})],1)],1)],1)],1):e._e()],1):e._e()},w=[],$={components:{pagination:o.Z},data(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{sound_appid:[{required:!0,tiggter:"blur",validator:f.C0}],sound_template_id:[{required:!0,tiggter:"blur",validator:f.C0}],sound_appkey:[{required:!0,tiggter:"blur",message:"请输入"}],sound_url:[{required:!0,tiggter:"blur",message:"请输入"}]},dialog:{id:"",visible:!1,forms:{},rules:{name:[{required:!0,trigger:"blur",message:"请输入"}],permission:[{required:!0,trigger:"blur",message:"请输入"}],menuType:[{required:!0,trigger:"change",message:"请输入"}],firstMenuId:[{required:!0,trigger:"blur",message:"请输入"}],secondMenuId:[{required:!0,trigger:"blur",message:"请输入"}],thirdMenuId:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},async created(){this.handleQuery()},mounted(){},methods:{handleSubmit(){this.$refs["forms"].validate(((e,t)=>{if(!e)return!1;(0,n.kq)(this.forms).then((e=>{this.$message.success("操作成功!"),this.handleQuery()}))}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},async handleDialog(e){this.dialog.forms=e?Object.assign(JSON.parse(JSON.stringify(e))):{},this.dialog.visible=!0,this.$nextTick((e=>this.$refs["dialogForm"].clearValidate()))},handleDel(e){this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{alertLevelDelete({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,n.go)().then((e=>{this.hasAuth=!0,this.forms=e.data,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},x=$,q=(0,u.Z)(x,k,w,!1,null,"6f6d9d9e",null),S=q.exports,C={components:{mailConfig:p,smsConfig:y,voiceConfig:S},data(){return{activeName:"mail-config"}},methods:{handleClick(e,t){}}},L=C,D=(0,u.Z)(L,a,i,!1,null,"7060ea45",null),A=D.exports},98803:function(e,t,s){s.d(t,{C0:function(){return r},Mj:function(){return a},Uz:function(){return o},eW:function(){return l},ed:function(){return i}});s(21703);const a=[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}],i=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],l=[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}],r=(e,t,s)=>{e.required||void 0!==t&&""!==t||s(),""===t||!Number.isInteger(+t)||+t<0?s(new Error("请输入整数值")):s()},o=(e,t,s)=>{""===t||isNaN(t)||Number(t)<0?s(new Error("请输入非负数字")):s()}}}]);