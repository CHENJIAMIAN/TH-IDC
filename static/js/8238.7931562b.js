"use strict";(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[8238],{78238:function(e,t,l){l.r(t),l.d(t,{default:function(){return m}});var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.showPage?l("div",{staticClass:"app-container menu-manage"},[e.hasAuth?e._e():l("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?l("div",{staticClass:"head"},[l("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[l("el-form-item",{attrs:{prop:"noteLevel"}},[l("el-select",{attrs:{clearable:"",placeholder:"通知等级"},model:{value:e.filterForm.noteLevel,callback:function(t){e.$set(e.filterForm,"noteLevel",t)},expression:"filterForm.noteLevel"}},e._l(e.alertLevelOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{attrs:{prop:"noteMode"}},[l("el-select",{attrs:{clearable:"",placeholder:"通知方式"},model:{value:e.filterForm.noteMode,callback:function(t){e.$set(e.filterForm,"noteMode",t)},expression:"filterForm.noteMode"}},e._l(e.noteModeOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{attrs:{prop:"sendTarget"}},[l("el-input",{attrs:{placeholder:"目标邮箱/号码"},model:{value:e.filterForm.sendTarget,callback:function(t){e.$set(e.filterForm,"sendTarget",t)},expression:"filterForm.sendTarget"}})],1),l("el-form-item",{attrs:{prop:"sendContent"}},[l("el-input",{attrs:{placeholder:"告警内容"},model:{value:e.filterForm.sendContent,callback:function(t){e.$set(e.filterForm,"sendContent","string"===typeof t?t.trim():t)},expression:"filterForm.sendContent"}})],1),l("el-form-item",{attrs:{prop:"status"}},[l("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.filterForm.status,callback:function(t){e.$set(e.filterForm,"status",t)},expression:"filterForm.status"}},[l("el-option",{attrs:{"text-color":"#55fb55",label:"成功",value:1}}),l("el-option",{attrs:{"text-color":"gray",label:"失败",value:2}})],1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}}),l("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",plain:""},on:{click:function(t){return e.handleReset("filterForm")}}},[e._v("重置")])],1)],1)],1):e._e(),e.hasAuth?l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[l("el-table-column",{attrs:{prop:"noteId",label:"通知ID"}}),l("el-table-column",{attrs:{prop:"noteLevel",label:"通知等级"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(e.alertLevelOpts.find((function(e){return e.id==l.noteLevel}))&&e.alertLevelOpts.find((function(e){return e.id==l.noteLevel})).name)+" ")]}}],null,!1,1021023058)}),l("el-table-column",{attrs:{sortable:"",prop:"noteMode",label:"通知方式"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(e.noteModeOpts.find((function(e){return e.id==l.noteMode}))&&e.noteModeOpts.find((function(e){return e.id==l.noteMode})).name)+" ")]}}],null,!1,1086436786)}),l("el-table-column",{attrs:{prop:"toUser",label:"接收者用户ID"}}),l("el-table-column",{attrs:{prop:"userName",label:"接收者用户名称",width:"160"}}),l("el-table-column",{attrs:{prop:"sendTarget",label:"目标邮箱/号码"}}),l("el-table-column",{attrs:{prop:"sendContent",label:"告警内容"}}),l("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1==n.status?l("span",{staticStyle:{color:"#55fb55"}},[e._v("成功")]):l("span",{staticStyle:{color:"gray"}},[e._v("失败")])]}}],null,!1,1749058218)})],1):e._e(),e.hasAuth?l("pagination",{attrs:{hidden:!(e.listTotal>0),total:e.listTotal,page:e.filterForm.pageNo,limit:e.filterForm.pageSize},on:{"update:page":function(t){return e.$set(e.filterForm,"pageNo",t)},"update:limit":function(t){return e.$set(e.filterForm,"pageSize",t)},pagination:e.getList}}):e._e()],1):e._e()},a=[],r=l(98803),o=l(94685),i=l(99009),s={components:{pagination:o.Z},data(){return{showPage:!1,hasAuth:!0,noteModeOpts:r.ed,alertLevelOpts:[],depOpts:[],firstMenuOpts:[],secondMenuOpts:[],filterForm:{noteLevel:null,noteMode:null,sendTarget:"",sendContent:"",status:null,pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0}},watch:{},created(){(0,i.D4)().then((e=>this.alertLevelOpts=e.data)),this.handleQuery()},mounted(){},methods:{handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},handleResumeStatus(e){this.$confirm("确认恢复状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{alertNotificationDelete({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,i.HE)(this.filterForm).then((e=>{this.hasAuth=!0,this.listData=e.data.list,this.listTotal=e.data.total,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},u=s,d=l(1001),c=(0,d.Z)(u,n,a,!1,null,"55c2814a",null),m=c.exports},98803:function(e,t,l){l.d(t,{C0:function(){return o},Mj:function(){return n},Uz:function(){return i},eW:function(){return r},ed:function(){return a}});l(21703);const n=[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}],a=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],r=[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}],o=(e,t,l)=>{e.required||void 0!==t&&""!==t||l(),""===t||!Number.isInteger(+t)||+t<0?l(new Error("请输入整数值")):l()},i=(e,t,l)=>{""===t||isNaN(t)||Number(t)<0?l(new Error("请输入非负数字")):l()}}}]);