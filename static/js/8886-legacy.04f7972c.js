(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[8886],{88886:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-config"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"告警等级",name:"alert-level",lazy:""}},[a("alert-level")],1),a("el-tab-pane",{attrs:{label:"告警显示",name:"alert-display",lazy:""}},[a("alert-display")],1),a("el-tab-pane",{attrs:{label:"屏蔽设置",name:"alert-mask-setting",lazy:""}},[a("alert-mask-setting")],1)],1)],1)},i=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.showPage?o("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():o("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?o("div",{staticClass:"head"},[o("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[o("el-form-item"),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[o("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[o("el-table-column",{attrs:{prop:"level",label:"级别"}}),o("el-table-column",{attrs:{prop:"name",label:"自定义名称"}}),o("el-table-column",{attrs:{prop:"noteType",label:"通知方式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.noteType?o("span",[e._v("语音")]):o("span",[e._v("文字")])]}}],null,!1,1322313385)}),o("el-table-column",{attrs:{prop:"noteContent",label:"通知内容"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.noteContent,(function(t){return o("div",{key:t},[e._v(" "+e._s(e.noteContentOpts.find((function(e){return e.id==t}))&&e.noteContentOpts.find((function(e){return e.id==t})).name)+" ")])}))}}],null,!1,3003580690)}),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.status?o("span",{staticStyle:{color:"#55fb55"}},[e._v("启用")]):o("span",{staticStyle:{color:"gray"}},[e._v("禁用")])]}}],null,!1,2360779935)}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"161"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(a)}}}),a.level>0&&a.level<6?e._e():o("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(a.id)}}})]}}],null,!1,2714804196)})],1):e._e(),e.hasAuth?o("pagination",{attrs:{hidden:!(e.listTotal>0),total:e.listTotal,page:e.filterForm.pageNo,limit:e.filterForm.pageSize},on:{"update:page":function(t){return e.$set(e.filterForm,"pageNo",t)},"update:limit":function(t){return e.$set(e.filterForm,"pageSize",t)},pagination:e.getList}}):e._e(),o("el-dialog",{attrs:{visible:e.dialog.visible,top:"20vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[o("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[o("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),o("img",{attrs:{src:a(1612)}})]),o("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"级别",prop:"level"}},[o("el-input",{attrs:{disabled:1==e.dialog.forms.level&&"紧急"==e.dialog.forms.name||2==e.dialog.forms.level&&"严重"==e.dialog.forms.name||3==e.dialog.forms.level&&"重要"==e.dialog.forms.name||4==e.dialog.forms.level&&"次要"==e.dialog.forms.name||5==e.dialog.forms.level&&"预警"==e.dialog.forms.name},model:{value:e.dialog.forms.level,callback:function(t){e.$set(e.dialog.forms,"level",t)},expression:"dialog.forms.level"}})],1),o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{attrs:{disabled:1==e.dialog.forms.level&&"紧急"==e.dialog.forms.name||2==e.dialog.forms.level&&"严重"==e.dialog.forms.name||3==e.dialog.forms.level&&"重要"==e.dialog.forms.name||4==e.dialog.forms.level&&"次要"==e.dialog.forms.name||5==e.dialog.forms.level&&"预警"==e.dialog.forms.name},model:{value:e.dialog.forms.name,callback:function(t){e.$set(e.dialog.forms,"name",t)},expression:"dialog.forms.name"}})],1),o("el-form-item",{attrs:{label:"通知方式",prop:"noteType"}},[o("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.dialog.forms.noteType,callback:function(t){e.$set(e.dialog.forms,"noteType",t)},expression:"dialog.forms.noteType"}},[o("el-radio",{attrs:{border:"",label:1}},[e._v("语音")]),o("el-radio",{attrs:{border:"",label:2}},[e._v("文字")])],1)],1),o("el-form-item",{attrs:{label:"通知内容",prop:"noteContent"}},[o("el-checkbox-group",{staticClass:"rooms-el-checkbox-group",model:{value:e.dialog.forms.noteContent,callback:function(t){e.$set(e.dialog.forms,"noteContent",t)},expression:"dialog.forms.noteContent"}},e._l(e.noteContentOpts,(function(t){return o("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])})),1)],1),o("el-form-item",{attrs:{label:"状态",prop:"status"}},[o("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[o("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),o("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:0}},[e._v("禁用")])],1)],1)],1),o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},r=[],s=a(16198),n=(a(38862),a(41539),a(35666),a(98803)),d=a(94685),m=a(99009),u={components:{pagination:d.Z},data:function(){return{showPage:!1,hasAuth:!0,depOpts:[],levelOpts:[{id:1,name:"紧急"},{id:2,name:"严重"},{id:3,name:"重要"},{id:4,name:"次要"},{id:5,name:"预警"}],noteContentOpts:[{id:"1",name:"时间"},{id:"2",name:"位置"},{id:"3",name:"内容"},{id:"4",name:"告警值"}],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,dialog:{id:"",visible:!1,forms:{},rules:{level:[{required:!0,trigger:"blur",validator:n.C0}],name:[{required:!0,trigger:"blur",message:"请输入"}],noteType:[{required:!0,trigger:"blur",message:"请输入"}],noteContent:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},created:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.handleQuery();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{dialogSubmit:function(){var e=this;this.$refs["dialogForm"].validate((function(t,a){if(!t)return!1;var o=null;o=e.dialog.forms.id?m.mG:m.Z5,e.dialog.forms.level=+e.dialog.forms.level,o(e.dialog.forms).then((function(t){e.$message.success("操作成功!"),e.$refs["dialogForm"].resetFields(),e.dialog.visible=!1,e.getList()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset:function(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},handleDialog:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e?t.dialog.forms=Object.assign(JSON.parse(JSON.stringify(e))):(t.dialog.forms={status:1},t.$set(t.dialog.forms,"noteContent",[])),t.dialog.visible=!0,t.$nextTick((function(e){return t.$refs["dialogForm"].clearValidate()}));case 3:case"end":return a.stop()}}),a)})))()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,m.vN)({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,m.po)(this.filterForm).then((function(t){e.hasAuth=!0,e.listData=t.data.list,e.listTotal=t.data.total,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},c=u,p=a(1001),f=(0,p.Z)(c,l,r,!1,null,"70cbb45a",null),g=f.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",plain:""},on:{click:function(t){return e.handleReset("filterForm")}}},[e._v("恢复默认值")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实时告警显示条数",prop:"realtimeCount"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.realtimeCount,callback:function(t){e.$set(e.forms,"realtimeCount",t)},expression:"forms.realtimeCount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实时告警最低级别",prop:"realtimeLowlevelShow"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.realtimeLowlevelShow,callback:function(t){e.$set(e.forms,"realtimeLowlevelShow",t)},expression:"forms.realtimeLowlevelShow"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"实时告警确认后是否还显示",prop:"realtimeIsConfirmShow"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":2},model:{value:e.forms.realtimeIsConfirmShow,callback:function(t){e.$set(e.forms,"realtimeIsConfirmShow",t)},expression:"forms.realtimeIsConfirmShow"}})],1)],1)],1),a("el-divider",{staticStyle:{margin:"10px 0"}}),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"空间告警最低级别",prop:"spaceLowlevelShow"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.spaceLowlevelShow,callback:function(t){e.$set(e.forms,"spaceLowlevelShow",t)},expression:"forms.spaceLowlevelShow"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"空间告警确认后是否还显示",prop:"spaceIsConfirmShow"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":2},model:{value:e.forms.spaceIsConfirmShow,callback:function(t){e.$set(e.forms,"spaceIsConfirmShow",t)},expression:"forms.spaceIsConfirmShow"}})],1)],1)],1),a("el-divider",{staticStyle:{margin:"10px 0"}}),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"告警间隔(分)",prop:"alertTimeGap"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.alertTimeGap,callback:function(t){e.$set(e.forms,"alertTimeGap",t)},expression:"forms.alertTimeGap"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"失败重发间隔(分)",prop:"alertFailTimeGap"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.alertFailTimeGap,callback:function(t){e.$set(e.forms,"alertFailTimeGap",t)},expression:"forms.alertFailTimeGap"}})],1)],1)],1)],1):e._e()],1):e._e()},v=[],b={components:{pagination:d.Z},data:function(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{realtimeCount:[{required:!1,trigger:"blur",validator:n.C0}],realtimeLowlevelShow:[{required:!1,trigger:"blur",validator:n.C0}],spaceLowlevelShow:[{required:!1,trigger:"blur",validator:n.C0}],alertTimeGap:[{required:!1,trigger:"blur",validator:n.C0}],alertFailTimeGap:[{required:!1,trigger:"blur",validator:n.C0}]}}},watch:{},created:function(){this.handleQuery()},mounted:function(){},methods:{handleSubmit:function(){var e=this;this.$refs["forms"].validate((function(t,a){if(!t)return!1;(0,m.YE)(e.forms).then((function(t){e.$message.success("操作成功!"),e.handleQuery()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset:function(e){var t=this;document.activeElement.blur(),this.$confirm("是否恢复默认设置 ? ","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$refs[e].resetFields(),(0,m.qB)().then((function(e){t.handleQuery()}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,m.b1)().then((function(t){e.hasAuth=!0,e.forms=t.data,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},y=b,k=(0,p.Z)(y,h,v,!1,null,"1781fb21",null),w=k.exports,T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.showPage?o("div",{staticClass:"role-manage"},[e.hasAuth?e._e():o("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?o("div",{staticClass:"head"},[o("el-form",{ref:"filterForm",attrs:{inline:!0,size:"medium",model:e.filterForm}},[o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[o("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[o("el-table-column",{attrs:{prop:"floorCode",label:"楼层编号"}}),o("el-table-column",{attrs:{prop:"roomCode",label:"房间编号"}}),o("el-table-column",{attrs:{prop:"maskType",label:"屏蔽方式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("div",[e._v(" "+e._s(e.maskTypeOpts.find((function(e){return e.id==a.maskType}))&&e.maskTypeOpts.find((function(e){return e.id==a.maskType})).name)+" ")])]}}],null,!1,1586673118)}),o("el-table-column",{attrs:{label:"屏蔽对象"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.points||a.devices||a.deviceGroups||a.pointTypes||a.deviceTypes,(function(t){return o("div",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))}}],null,!1,2783180937)}),o("el-table-column",{attrs:{align:"center",prop:"maskPeriod",label:"屏蔽时段",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.maskPeriod.split(","),(function(t){return o("div",{key:t},[e._v(" "+e._s(t)+" ")])}))}}],null,!1,2274232695)}),o("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.status?o("span",{staticStyle:{color:"#55fb55"}},[e._v("启用")]):o("span",{staticStyle:{color:"gray"}},[e._v("禁用")])]}}],null,!1,2360779935)}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(a)}}}),o("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(a.id)}}})]}}],null,!1,1998501215)})],1):e._e(),e.hasAuth?o("pagination",{staticStyle:{"margin-top":"-10px"},attrs:{hidden:!(e.listTotal>0),total:e.listTotal,page:e.filterForm.pageNo,limit:e.filterForm.pageSize},on:{"update:page":function(t){return e.$set(e.filterForm,"pageNo",t)},"update:limit":function(t){return e.$set(e.filterForm,"pageSize",t)},pagination:e.getList}}):e._e(),o("el-dialog",{attrs:{visible:e.dialog.visible,top:"25vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[o("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[o("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),o("img",{attrs:{src:a(1612)}})]),o("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"楼层",prop:"floorCode"}},[o("el-select",{on:{change:function(t){return e.$set(e.dialog.forms,"roomCode","")}},model:{value:e.dialog.forms.floorCode,callback:function(t){e.$set(e.dialog.forms,"floorCode",t)},expression:"dialog.forms.floorCode"}},e._l(e.floorOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.floorCode}})})),1)],1),o("el-form-item",{attrs:{label:"房间",prop:"roomCode"}},[o("el-select",{on:{change:e.handleRoomChange},model:{value:e.dialog.forms.roomCode,callback:function(t){e.$set(e.dialog.forms,"roomCode",t)},expression:"dialog.forms.roomCode"}},e._l(e.roomOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.roomCode}})})),1)],1),o("el-form-item",{attrs:{label:"屏蔽方式",prop:"maskType"}},[o("el-select",{model:{value:e.dialog.forms.maskType,callback:function(t){e.$set(e.dialog.forms,"maskType",t)},expression:"dialog.forms.maskType"}},e._l(e.maskTypeOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 2"}],attrs:{label:"设备类型",prop:"deviceTypes"}},[o("el-select",{attrs:{multiple:"","popper-class":"three-column"},model:{value:e.dialog.forms.deviceTypes,callback:function(t){e.$set(e.dialog.forms,"deviceTypes",t)},expression:"dialog.forms.deviceTypes"}},e._l(e.deviceTypeOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 3"}],attrs:{label:"设备类型",prop:"deviceTypes"}},[o("el-select",{attrs:{"popper-class":"three-column"},on:{change:e.handleDeviceTypeChange},model:{value:e.dialog.forms.deviceTypes2,callback:function(t){e.$set(e.dialog.forms,"deviceTypes2",t)},expression:"dialog.forms.deviceTypes2"}},e._l(e.deviceTypeOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 3"}],attrs:{label:"测点类型",prop:"pointTypes"}},[o("el-select",{attrs:{multiple:"","popper-class":"three-column"},model:{value:e.dialog.forms.pointTypes,callback:function(t){e.$set(e.dialog.forms,"pointTypes",t)},expression:"dialog.forms.pointTypes"}},e._l(e.pointTypeOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 4"}],attrs:{label:"设备组",prop:"deviceGroups"}},[o("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.deviceGroups,callback:function(t){e.$set(e.dialog.forms,"deviceGroups",t)},expression:"dialog.forms.deviceGroups"}},e._l(e.deviceGroupOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:5==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 5"}],attrs:{label:"设备",prop:"devices"}},[o("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.devices,callback:function(t){e.$set(e.dialog.forms,"devices",t)},expression:"dialog.forms.devices"}},e._l(e.deviceOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 6"}],attrs:{label:"设备",prop:"devices"}},[o("el-select",{attrs:{"popper-class":"three-column"},on:{change:e.handleDeviceChange},model:{value:e.dialog.forms.devices2,callback:function(t){e.$set(e.dialog.forms,"devices2",t)},expression:"dialog.forms.devices2"}},e._l(e.deviceOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.deviceCode}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 6"}],attrs:{label:"测点",prop:"points"}},[o("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.points,callback:function(t){e.$set(e.dialog.forms,"points",t)},expression:"dialog.forms.points"}},e._l(e.pointOpts,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"屏蔽时段",prop:"maskPeriod2"}},[e._l(e.dialog.forms.maskPeriod2,(function(t,a){return[o("div",{key:a+Math.random(),staticStyle:{display:"flex",gap:"10px",margin:"5px"}},[o("el-date-picker",{attrs:{type:"datetimerange",placeholder:"请选择","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.dialog.forms.maskPeriod2[a],callback:function(t){e.$set(e.dialog.forms.maskPeriod2,a,t)},expression:"dialog.forms.maskPeriod2[index]"}}),o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-minus",plain:""},on:{click:function(t){return e.dialog.forms.maskPeriod2.splice(a,1)}}})],1)]}))],2),o("el-form-item",{attrs:{label:"",prop:""}},[o("div",{staticStyle:{display:"grid"}},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.dialog.forms.maskPeriod2.push("")}}})],1)]),o("el-form-item",{attrs:{label:"状态",prop:"status"}},[o("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[o("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),o("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:2}},[e._v("禁用")])],1)],1)],1),o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},C=[],_=(a(21249),a(57327),a(69600),a(69826),a(74916),a(23123),a(7169)),x={components:{pagination:d.Z},data:function(){return{showPage:!1,hasAuth:!0,teststr:"",filterForm:{pageNo:1,pageSize:10},maskTypeOpts:[{id:1,name:"所有"},{id:2,name:"指定设备类型"},{id:3,name:"指定测点类型"},{id:4,name:"指定设备组"},{id:5,name:"指定设备"},{id:6,name:"指定测点"}],floorOpts:[],roomOpts:[],pointOpts:[],pointTypeOpts:[],deviceGroupOpts:[],deviceTypeOpts:[],deviceOpts:[],pointTypesOpts:[],deviceGroupsOpts:[],devicesOpts:[],pointsOpts:[],listLoading:!0,listData:[],listTotal:0,treeDataQX:[],treeDataFJ:[],defaultCheckedIdsQX:[],dialog:{id:"",visible:!1,forms:{maskPeriod2:[""]},rules:{floorCode:[{required:!0,trigger:"blur",message:"请输入"}],roomCode:[{required:!0,trigger:"blur",message:"请输入"}],maskType:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{"dialog.forms.floorCode":function(e,t){var a=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return a.roomOpts=[],t.next=5,(0,_.RE)({floorCode:e});case 5:o=t.sent,a.roomOpts=o.data;case 7:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;(0,_.aJ)().then((function(t){return e.floorOpts=t.data})),(0,_.mA)().then((function(t){return e.deviceTypeOpts=t.data})),this.handleQuery()},mounted:function(){},methods:{handleRoomChange:function(e){var t=this;(0,_.xS)({roomCode:e}).then((function(e){return t.pointOpts=e.data})),(0,_.as)({roomCode:e}).then((function(e){return t.deviceOpts=e.data})),(0,_.w8)({roomCode:e}).then((function(e){return t.deviceGroupOpts=e.data}))},handleDeviceChange:function(e){var t=this;this.dialog.forms.points=[],(0,_.xS)({roomCode:this.dialog.forms.roomCode,deviceCode:e}).then((function(e){t.pointOpts=e.data}))},handleDeviceTypeChange:function(e){var t=this;this.dialog.forms.pointTypes=[],(0,_.W3)({deviceTypeId:e}).then((function(e){return t.pointTypeOpts=e.data}))},dialogSubmit:function(){var e=this;this.dialog.forms.maskPeriod=this.dialog.forms.maskPeriod2.filter((function(e){return e})).map((function(e){return e.join(" - ")})),this.$refs["dialogForm"].validate((function(t,a){if(!t)return!1;var o=null;o=e.dialog.forms.id?m.ol:m.S_,o(e.dialog.forms).then((function(t){e.$message.success("操作成功!"),e.$refs["dialogForm"].resetFields(),e.dialog.visible=!1,e.getList()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset:function(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},handleDialog:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var o,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=22;break}return a.next=3,(0,m.Nt)({id:e.id});case 3:o=a.sent,t.dialog.forms=o.data,t.floorOpts=o.data.spaceFloorList,i=o.data.spaceFloorList.find((function(e){return e.has})),i&&(t.dialog.forms.floorCode=i.floorCode),t.roomOpts=o.data.spaceRoomList,l=o.data.spaceRoomList.find((function(e){return e.has})),l&&(t.dialog.forms.roomCode=l.roomCode),o.data.deviceTypes?t.deviceTypeOpts=o.data.deviceTypes:(0,_.mA)().then((function(e){return t.deviceTypeOpts=e.data})),t.dialog.forms.deviceTypes=o.data.deviceTypes&&o.data.deviceTypes.filter((function(e){return e.has})).map((function(e){return e.id})),t.deviceGroupOpts=o.data.deviceGroups,t.dialog.forms.deviceGroups=o.data.deviceGroups&&o.data.deviceGroups.filter((function(e){return e.has})).map((function(e){return e.id})),t.pointOpts=o.data.points,t.dialog.forms.points=o.data.points&&o.data.points.filter((function(e){return e.has})).map((function(e){return e.id})),t.pointTypeOpts=o.data.pointTypes,t.dialog.forms.pointTypes=o.data.pointTypes&&o.data.pointTypes.filter((function(e){return e.has})).map((function(e){return e.id})),t.$set(t.dialog.forms,"maskPeriod2",o.data.maskPeriod.split(",").map((function(e){return e.split(" - ")}))),a.next=23;break;case 22:t.dialog.forms={status:1,maskPeriod2:[""]};case 23:t.dialog.visible=!0,t.$nextTick((function(e){return t.$refs["dialogForm"].clearValidate()}));case 25:case"end":return a.stop()}}),a)})))()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,m.Yt)({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,m.vG)(this.filterForm).then((function(t){e.hasAuth=!0,e.listData=t.data.list,e.listTotal=t.data.total,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},S=x,$=(0,p.Z)(S,T,C,!1,null,"74a23a5b",null),O=$.exports,F={components:{alertLevel:g,alertDisplay:w,alertMaskSetting:O},data:function(){return{activeName:"alert-level"}},methods:{handleTabClick:function(e,t){}}},L=F,Z=(0,p.Z)(L,o,i,!1,null,"678ea7a5",null),N=Z.exports},55988:function(e,t,a){var o=a(70111),i=Math.floor;e.exports=Number.isInteger||function(e){return!o(e)&&isFinite(e)&&i(e)===e}},69826:function(e,t,a){"use strict";var o=a(82109),i=a(42092).find,l=a(51223),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(r)},33161:function(e,t,a){var o=a(82109),i=a(55988);o({target:"Number",stat:!0},{isInteger:i})},98803:function(e,t,a){"use strict";a.d(t,{C0:function(){return n},Mj:function(){return l},Uz:function(){return d},eW:function(){return s},ed:function(){return r}});var o,i=a(23796),l=(a(33161),a(9653),a(21703),[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}]),r=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],s=(o={id:1,name:"母联柜"},(0,i.Z)(o,"id",2),(0,i.Z)(o,"name","直流操作电源柜"),(0,i.Z)(o,"id",3),(0,i.Z)(o,"name","变压器"),(0,i.Z)(o,"id",4),(0,i.Z)(o,"name","低压进线柜"),(0,i.Z)(o,"id",5),(0,i.Z)(o,"name","配电柜"),(0,i.Z)(o,"id",6),(0,i.Z)(o,"name","柴油发电机组"),(0,i.Z)(o,"id",7),(0,i.Z)(o,"name","蓄电池"),(0,i.Z)(o,"id",8),(0,i.Z)(o,"name","UPS主机"),(0,i.Z)(o,"id",9),(0,i.Z)(o,"name","UPS变换器"),(0,i.Z)(o,"id",10),(0,i.Z)(o,"name","UPS逆变器"),(0,i.Z)(o,"id",11),(0,i.Z)(o,"name","列头柜"),(0,i.Z)(o,"id",12),(0,i.Z)(o,"name","空调"),(0,i.Z)(o,"id",13),(0,i.Z)(o,"name","温湿度"),(0,i.Z)(o,"id",14),(0,i.Z)(o,"name","氢气探测器"),(0,i.Z)(o,"id",15),(0,i.Z)(o,"name","水浸"),[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}]),n=function(e,t,a){e.required||void 0!==t&&""!==t||a(),""===t||!Number.isInteger(+t)||+t<0?a(new Error("请输入整数值")):a()},d=function(e,t,a){""===t||isNaN(t)||Number(t)<0?a(new Error("请输入非负数字")):a()}}}]);