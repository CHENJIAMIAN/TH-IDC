"use strict";(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[8886],{88886:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-config"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"告警等级",name:"alert-level",lazy:""}},[a("alert-level")],1),a("el-tab-pane",{attrs:{label:"告警显示",name:"alert-display",lazy:""}},[a("alert-display")],1),a("el-tab-pane",{attrs:{label:"屏蔽设置",name:"alert-mask-setting",lazy:""}},[a("alert-mask-setting")],1)],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.showPage?l("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():l("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?l("div",{staticClass:"head"},[l("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[l("el-form-item"),l("el-form-item",[l("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[l("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[l("el-table-column",{attrs:{prop:"level",label:"级别"}}),l("el-table-column",{attrs:{prop:"name",label:"自定义名称"}}),l("el-table-column",{attrs:{prop:"noteType",label:"通知方式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.noteType?l("span",[e._v("语音")]):l("span",[e._v("文字")])]}}],null,!1,1322313385)}),l("el-table-column",{attrs:{prop:"noteContent",label:"通知内容"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.noteContent,(function(t){return l("div",{key:t},[e._v(" "+e._s(e.noteContentOpts.find((function(e){return e.id==t}))&&e.noteContentOpts.find((function(e){return e.id==t})).name)+" ")])}))}}],null,!1,3003580690)}),l("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.status?l("span",{staticStyle:{color:"#55fb55"}},[e._v("启用")]):l("span",{staticStyle:{color:"gray"}},[e._v("禁用")])]}}],null,!1,2360779935)}),l("el-table-column",{attrs:{label:"操作",align:"center",width:"161"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[l("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(a)}}}),a.level>0&&a.level<6?e._e():l("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(a.id)}}})]}}],null,!1,2714804196)})],1):e._e(),e.hasAuth?l("pagination",{attrs:{hidden:!(e.listTotal>0),total:e.listTotal,page:e.filterForm.pageNo,limit:e.filterForm.pageSize},on:{"update:page":function(t){return e.$set(e.filterForm,"pageNo",t)},"update:limit":function(t){return e.$set(e.filterForm,"pageSize",t)},pagination:e.getList}}):e._e(),l("el-dialog",{attrs:{visible:e.dialog.visible,top:"20vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[l("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[l("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),l("img",{attrs:{src:a(1612)}})]),l("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"级别",prop:"level"}},[l("el-input",{attrs:{disabled:1==e.dialog.forms.level&&"紧急"==e.dialog.forms.name||2==e.dialog.forms.level&&"严重"==e.dialog.forms.name||3==e.dialog.forms.level&&"重要"==e.dialog.forms.name||4==e.dialog.forms.level&&"次要"==e.dialog.forms.name||5==e.dialog.forms.level&&"预警"==e.dialog.forms.name},model:{value:e.dialog.forms.level,callback:function(t){e.$set(e.dialog.forms,"level",t)},expression:"dialog.forms.level"}})],1),l("el-form-item",{attrs:{label:"名称",prop:"name"}},[l("el-input",{attrs:{disabled:1==e.dialog.forms.level&&"紧急"==e.dialog.forms.name||2==e.dialog.forms.level&&"严重"==e.dialog.forms.name||3==e.dialog.forms.level&&"重要"==e.dialog.forms.name||4==e.dialog.forms.level&&"次要"==e.dialog.forms.name||5==e.dialog.forms.level&&"预警"==e.dialog.forms.name},model:{value:e.dialog.forms.name,callback:function(t){e.$set(e.dialog.forms,"name",t)},expression:"dialog.forms.name"}})],1),l("el-form-item",{attrs:{label:"通知方式",prop:"noteType"}},[l("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.dialog.forms.noteType,callback:function(t){e.$set(e.dialog.forms,"noteType",t)},expression:"dialog.forms.noteType"}},[l("el-radio",{attrs:{border:"",label:1}},[e._v("语音")]),l("el-radio",{attrs:{border:"",label:2}},[e._v("文字")])],1)],1),l("el-form-item",{attrs:{label:"通知内容",prop:"noteContent"}},[l("el-checkbox-group",{staticClass:"rooms-el-checkbox-group",model:{value:e.dialog.forms.noteContent,callback:function(t){e.$set(e.dialog.forms,"noteContent",t)},expression:"dialog.forms.noteContent"}},e._l(e.noteContentOpts,(function(t){return l("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])})),1)],1),l("el-form-item",{attrs:{label:"状态",prop:"status"}},[l("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[l("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),l("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:0}},[e._v("禁用")])],1)],1)],1),l("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},s=[],r=a(98803),n=a(94685),d=a(99009),m={components:{pagination:n.Z},data(){return{showPage:!1,hasAuth:!0,depOpts:[],levelOpts:[{id:1,name:"紧急"},{id:2,name:"严重"},{id:3,name:"重要"},{id:4,name:"次要"},{id:5,name:"预警"}],noteContentOpts:[{id:"1",name:"时间"},{id:"2",name:"位置"},{id:"3",name:"内容"},{id:"4",name:"告警值"}],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,dialog:{id:"",visible:!1,forms:{},rules:{level:[{required:!0,trigger:"blur",validator:r.C0}],name:[{required:!0,trigger:"blur",message:"请输入"}],noteType:[{required:!0,trigger:"blur",message:"请输入"}],noteContent:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},async created(){this.handleQuery()},mounted(){},methods:{dialogSubmit(){this.$refs["dialogForm"].validate(((e,t)=>{if(!e)return!1;{let e=null;e=this.dialog.forms.id?d.mG:d.Z5,this.dialog.forms.level=+this.dialog.forms.level,e(this.dialog.forms).then((e=>{this.$message.success("操作成功!"),this.$refs["dialogForm"].resetFields(),this.dialog.visible=!1,this.getList()}))}}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},async handleDialog(e){e?this.dialog.forms=Object.assign(JSON.parse(JSON.stringify(e))):(this.dialog.forms={status:1},this.$set(this.dialog.forms,"noteContent",[])),this.dialog.visible=!0,this.$nextTick((e=>this.$refs["dialogForm"].clearValidate()))},handleDel(e){this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,d.vN)({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,d.po)(this.filterForm).then((e=>{this.hasAuth=!0,this.listData=e.data.list,this.listTotal=e.data.total,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},p=m,c=a(1001),u=(0,c.Z)(p,o,s,!1,null,"70cbb45a",null),f=u.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",plain:""},on:{click:function(t){return e.handleReset("filterForm")}}},[e._v("恢复默认值")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实时告警显示条数",prop:"realtimeCount"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.realtimeCount,callback:function(t){e.$set(e.forms,"realtimeCount",t)},expression:"forms.realtimeCount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实时告警最低级别",prop:"realtimeLowlevelShow"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.realtimeLowlevelShow,callback:function(t){e.$set(e.forms,"realtimeLowlevelShow",t)},expression:"forms.realtimeLowlevelShow"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"实时告警确认后是否还显示",prop:"realtimeIsConfirmShow"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":2},model:{value:e.forms.realtimeIsConfirmShow,callback:function(t){e.$set(e.forms,"realtimeIsConfirmShow",t)},expression:"forms.realtimeIsConfirmShow"}})],1)],1)],1),a("el-divider",{staticStyle:{margin:"10px 0"}}),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"空间告警最低级别",prop:"spaceLowlevelShow"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.spaceLowlevelShow,callback:function(t){e.$set(e.forms,"spaceLowlevelShow",t)},expression:"forms.spaceLowlevelShow"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"空间告警确认后是否还显示",prop:"spaceIsConfirmShow"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":2},model:{value:e.forms.spaceIsConfirmShow,callback:function(t){e.$set(e.forms,"spaceIsConfirmShow",t)},expression:"forms.spaceIsConfirmShow"}})],1)],1)],1),a("el-divider",{staticStyle:{margin:"10px 0"}}),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"告警间隔(分)",prop:"alertTimeGap"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.alertTimeGap,callback:function(t){e.$set(e.forms,"alertTimeGap",t)},expression:"forms.alertTimeGap"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"失败重发间隔(分)",prop:"alertFailTimeGap"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.alertFailTimeGap,callback:function(t){e.$set(e.forms,"alertFailTimeGap",t)},expression:"forms.alertFailTimeGap"}})],1)],1)],1)],1):e._e()],1):e._e()},g=[],v={components:{pagination:n.Z},data(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{realtimeCount:[{required:!1,trigger:"blur",validator:r.C0}],realtimeLowlevelShow:[{required:!1,trigger:"blur",validator:r.C0}],spaceLowlevelShow:[{required:!1,trigger:"blur",validator:r.C0}],alertTimeGap:[{required:!1,trigger:"blur",validator:r.C0}],alertFailTimeGap:[{required:!1,trigger:"blur",validator:r.C0}]}}},watch:{},created(){this.handleQuery()},mounted(){},methods:{handleSubmit(){this.$refs["forms"].validate(((e,t)=>{if(!e)return!1;(0,d.YE)(this.forms).then((e=>{this.$message.success("操作成功!"),this.handleQuery()}))}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset(e){document.activeElement.blur(),this.$confirm("是否恢复默认设置 ? ","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$refs[e].resetFields(),(0,d.qB)().then((e=>{this.handleQuery()}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,d.b1)().then((e=>{this.hasAuth=!0,this.forms=e.data,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},b=v,y=(0,c.Z)(b,h,g,!1,null,"1781fb21",null),k=y.exports,T=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.showPage?l("div",{staticClass:"role-manage"},[e.hasAuth?e._e():l("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?l("div",{staticClass:"head"},[l("el-form",{ref:"filterForm",attrs:{inline:!0,size:"medium",model:e.filterForm}},[l("el-form-item",[l("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[l("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[l("el-table-column",{attrs:{prop:"floorCode",label:"楼层编号"}}),l("el-table-column",{attrs:{prop:"roomCode",label:"房间编号"}}),l("el-table-column",{attrs:{prop:"maskType",label:"屏蔽方式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[l("div",[e._v(" "+e._s(e.maskTypeOpts.find((function(e){return e.id==a.maskType}))&&e.maskTypeOpts.find((function(e){return e.id==a.maskType})).name)+" ")])]}}],null,!1,1586673118)}),l("el-table-column",{attrs:{label:"屏蔽对象"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.points||a.devices||a.deviceGroups||a.pointTypes||a.deviceTypes,(function(t){return l("div",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))}}],null,!1,2783180937)}),l("el-table-column",{attrs:{align:"center",prop:"maskPeriod",label:"屏蔽时段",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.maskPeriod.split(","),(function(t){return l("div",{key:t},[e._v(" "+e._s(t)+" ")])}))}}],null,!1,2274232695)}),l("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.status?l("span",{staticStyle:{color:"#55fb55"}},[e._v("启用")]):l("span",{staticStyle:{color:"gray"}},[e._v("禁用")])]}}],null,!1,2360779935)}),l("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[l("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(a)}}}),l("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(a.id)}}})]}}],null,!1,1998501215)})],1):e._e(),e.hasAuth?l("pagination",{staticStyle:{"margin-top":"-10px"},attrs:{hidden:!(e.listTotal>0),total:e.listTotal,page:e.filterForm.pageNo,limit:e.filterForm.pageSize},on:{"update:page":function(t){return e.$set(e.filterForm,"pageNo",t)},"update:limit":function(t){return e.$set(e.filterForm,"pageSize",t)},pagination:e.getList}}):e._e(),l("el-dialog",{attrs:{visible:e.dialog.visible,top:"25vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[l("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[l("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),l("img",{attrs:{src:a(1612)}})]),l("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"楼层",prop:"floorCode"}},[l("el-select",{on:{change:function(t){return e.$set(e.dialog.forms,"roomCode","")}},model:{value:e.dialog.forms.floorCode,callback:function(t){e.$set(e.dialog.forms,"floorCode",t)},expression:"dialog.forms.floorCode"}},e._l(e.floorOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.floorCode}})})),1)],1),l("el-form-item",{attrs:{label:"房间",prop:"roomCode"}},[l("el-select",{on:{change:e.handleRoomChange},model:{value:e.dialog.forms.roomCode,callback:function(t){e.$set(e.dialog.forms,"roomCode",t)},expression:"dialog.forms.roomCode"}},e._l(e.roomOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.roomCode}})})),1)],1),l("el-form-item",{attrs:{label:"屏蔽方式",prop:"maskType"}},[l("el-select",{model:{value:e.dialog.forms.maskType,callback:function(t){e.$set(e.dialog.forms,"maskType",t)},expression:"dialog.forms.maskType"}},e._l(e.maskTypeOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 2"}],attrs:{label:"设备类型",prop:"deviceTypes"}},[l("el-select",{attrs:{multiple:"","popper-class":"three-column"},model:{value:e.dialog.forms.deviceTypes,callback:function(t){e.$set(e.dialog.forms,"deviceTypes",t)},expression:"dialog.forms.deviceTypes"}},e._l(e.deviceTypeOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 3"}],attrs:{label:"设备类型",prop:"deviceTypes"}},[l("el-select",{attrs:{"popper-class":"three-column"},on:{change:e.handleDeviceTypeChange},model:{value:e.dialog.forms.deviceTypes2,callback:function(t){e.$set(e.dialog.forms,"deviceTypes2",t)},expression:"dialog.forms.deviceTypes2"}},e._l(e.deviceTypeOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 3"}],attrs:{label:"测点类型",prop:"pointTypes"}},[l("el-select",{attrs:{multiple:"","popper-class":"three-column"},model:{value:e.dialog.forms.pointTypes,callback:function(t){e.$set(e.dialog.forms,"pointTypes",t)},expression:"dialog.forms.pointTypes"}},e._l(e.pointTypeOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 4"}],attrs:{label:"设备组",prop:"deviceGroups"}},[l("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.deviceGroups,callback:function(t){e.$set(e.dialog.forms,"deviceGroups",t)},expression:"dialog.forms.deviceGroups"}},e._l(e.deviceGroupOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:5==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 5"}],attrs:{label:"设备",prop:"devices"}},[l("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.devices,callback:function(t){e.$set(e.dialog.forms,"devices",t)},expression:"dialog.forms.devices"}},e._l(e.deviceOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 6"}],attrs:{label:"设备",prop:"devices"}},[l("el-select",{attrs:{"popper-class":"three-column"},on:{change:e.handleDeviceChange},model:{value:e.dialog.forms.devices2,callback:function(t){e.$set(e.dialog.forms,"devices2",t)},expression:"dialog.forms.devices2"}},e._l(e.deviceOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.deviceCode}})})),1)],1),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6==e.dialog.forms.maskType,expression:"dialog.forms.maskType == 6"}],attrs:{label:"测点",prop:"points"}},[l("el-select",{attrs:{multiple:""},model:{value:e.dialog.forms.points,callback:function(t){e.$set(e.dialog.forms,"points",t)},expression:"dialog.forms.points"}},e._l(e.pointOpts,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),l("el-form-item",{attrs:{label:"屏蔽时段",prop:"maskPeriod2"}},[e._l(e.dialog.forms.maskPeriod2,(function(t,a){return[l("div",{key:a+Math.random(),staticStyle:{display:"flex",gap:"10px",margin:"5px"}},[l("el-date-picker",{attrs:{type:"datetimerange",placeholder:"请选择","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.dialog.forms.maskPeriod2[a],callback:function(t){e.$set(e.dialog.forms.maskPeriod2,a,t)},expression:"dialog.forms.maskPeriod2[index]"}}),l("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-minus",plain:""},on:{click:function(t){return e.dialog.forms.maskPeriod2.splice(a,1)}}})],1)]}))],2),l("el-form-item",{attrs:{label:"",prop:""}},[l("div",{staticStyle:{display:"grid"}},[l("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.dialog.forms.maskPeriod2.push("")}}})],1)]),l("el-form-item",{attrs:{label:"状态",prop:"status"}},[l("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[l("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),l("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:2}},[e._v("禁用")])],1)],1)],1),l("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},w=[],C=a(7169),_={components:{pagination:n.Z},data(){return{showPage:!1,hasAuth:!0,teststr:"",filterForm:{pageNo:1,pageSize:10},maskTypeOpts:[{id:1,name:"所有"},{id:2,name:"指定设备类型"},{id:3,name:"指定测点类型"},{id:4,name:"指定设备组"},{id:5,name:"指定设备"},{id:6,name:"指定测点"}],floorOpts:[],roomOpts:[],pointOpts:[],pointTypeOpts:[],deviceGroupOpts:[],deviceTypeOpts:[],deviceOpts:[],pointTypesOpts:[],deviceGroupsOpts:[],devicesOpts:[],pointsOpts:[],listLoading:!0,listData:[],listTotal:0,treeDataQX:[],treeDataFJ:[],defaultCheckedIdsQX:[],dialog:{id:"",visible:!1,forms:{maskPeriod2:[""]},rules:{floorCode:[{required:!0,trigger:"blur",message:"请输入"}],roomCode:[{required:!0,trigger:"blur",message:"请输入"}],maskType:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{async"dialog.forms.floorCode"(e,t){if(!e)return;this.roomOpts=[];const a=await(0,C.RE)({floorCode:e});this.roomOpts=a.data}},created(){(0,C.aJ)().then((e=>this.floorOpts=e.data)),(0,C.mA)().then((e=>this.deviceTypeOpts=e.data)),this.handleQuery()},mounted(){},methods:{handleRoomChange(e){(0,C.xS)({roomCode:e}).then((e=>this.pointOpts=e.data)),(0,C.as)({roomCode:e}).then((e=>this.deviceOpts=e.data)),(0,C.w8)({roomCode:e}).then((e=>this.deviceGroupOpts=e.data))},handleDeviceChange(e){this.dialog.forms.points=[],(0,C.xS)({roomCode:this.dialog.forms.roomCode,deviceCode:e}).then((e=>{this.pointOpts=e.data}))},handleDeviceTypeChange(e){this.dialog.forms.pointTypes=[],(0,C.W3)({deviceTypeId:e}).then((e=>this.pointTypeOpts=e.data))},dialogSubmit(){this.dialog.forms.maskPeriod=this.dialog.forms.maskPeriod2.filter((e=>e)).map((e=>e.join(" - "))),this.$refs["dialogForm"].validate(((e,t)=>{if(!e)return!1;{let e=null;e=this.dialog.forms.id?d.ol:d.S_,e(this.dialog.forms).then((e=>{this.$message.success("操作成功!"),this.$refs["dialogForm"].resetFields(),this.dialog.visible=!1,this.getList()}))}}))},handleQuery(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},async handleDialog(e){if(e){const t=await(0,d.Nt)({id:e.id});this.dialog.forms=t.data,this.floorOpts=t.data.spaceFloorList;const a=t.data.spaceFloorList.find((e=>e.has));a&&(this.dialog.forms.floorCode=a.floorCode),this.roomOpts=t.data.spaceRoomList;const l=t.data.spaceRoomList.find((e=>e.has));l&&(this.dialog.forms.roomCode=l.roomCode),t.data.deviceTypes?this.deviceTypeOpts=t.data.deviceTypes:(0,C.mA)().then((e=>this.deviceTypeOpts=e.data)),this.dialog.forms.deviceTypes=t.data.deviceTypes&&t.data.deviceTypes.filter((e=>e.has)).map((e=>e.id)),this.deviceGroupOpts=t.data.deviceGroups,this.dialog.forms.deviceGroups=t.data.deviceGroups&&t.data.deviceGroups.filter((e=>e.has)).map((e=>e.id)),this.pointOpts=t.data.points,this.dialog.forms.points=t.data.points&&t.data.points.filter((e=>e.has)).map((e=>e.id)),this.pointTypeOpts=t.data.pointTypes,this.dialog.forms.pointTypes=t.data.pointTypes&&t.data.pointTypes.filter((e=>e.has)).map((e=>e.id)),this.$set(this.dialog.forms,"maskPeriod2",t.data.maskPeriod.split(",").map((e=>e.split(" - "))))}else this.dialog.forms={status:1,maskPeriod2:[""]};this.dialog.visible=!0,this.$nextTick((e=>this.$refs["dialogForm"].clearValidate()))},handleDel(e){this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,d.Yt)({id:e}).then((e=>{this.getList(),this.$message.success("删除成功!")}))})).catch((()=>{}))},getList(){this.listLoading=!0,(0,d.vG)(this.filterForm).then((e=>{this.hasAuth=!0,this.listData=e.data.list,this.listTotal=e.data.total,this.listLoading=!1})).catch((e=>{this.hasAuth=!1})).finally((e=>{this.showPage=!0}))}}},x=_,S=(0,c.Z)(x,T,w,!1,null,"74a23a5b",null),$=S.exports,O={components:{alertLevel:f,alertDisplay:k,alertMaskSetting:$},data(){return{activeName:"alert-level"}},methods:{handleTabClick(e,t){}}},F=O,L=(0,c.Z)(F,l,i,!1,null,"678ea7a5",null),N=L.exports},98803:function(e,t,a){a.d(t,{C0:function(){return s},Mj:function(){return l},Uz:function(){return r},eW:function(){return o},ed:function(){return i}});a(21703);const l=[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}],i=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],o=[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}],s=(e,t,a)=>{e.required||void 0!==t&&""!==t||a(),""===t||!Number.isInteger(+t)||+t<0?a(new Error("请输入整数值")):a()},r=(e,t,a)=>{""===t||isNaN(t)||Number(t)<0?a(new Error("请输入非负数字")):a()}}}]);