(self["webpackChunkTH_IDC"]=self["webpackChunkTH_IDC"]||[]).push([[7509],{53741:function(e,t,a){var s=a(28887),r=Math.floor;e.exports=Number.isInteger||function(e){return!s(e)&&isFinite(e)&&r(e)===e}},16544:function(e,t,a){var s=a(32538),r=a(53741);s({target:"Number",stat:!0},{isInteger:r})},41849:function(e,t,a){"use strict";a.d(t,{C0:function(){return o},Mj:function(){return i},Uz:function(){return u},eW:function(){return l},ed:function(){return n}});var s,r=a(20638),i=(a(16544),a(24238),a(48503),[{id:1,name:"整型"},{id:2,name:"长整型"},{id:3,name:"浮点型"},{id:4,name:"布尔型"},{id:5,name:"字符串"},{id:6,name:"时间戳"}]),n=[{id:1,name:"邮箱"},{id:2,name:"短信"},{id:3,name:"语音"},{id:4,name:"微信"},{id:5,name:"钉钉"},{id:6,name:"声光"}],l=(s={id:1,name:"母联柜"},(0,r.Z)(s,"id",2),(0,r.Z)(s,"name","直流操作电源柜"),(0,r.Z)(s,"id",3),(0,r.Z)(s,"name","变压器"),(0,r.Z)(s,"id",4),(0,r.Z)(s,"name","低压进线柜"),(0,r.Z)(s,"id",5),(0,r.Z)(s,"name","配电柜"),(0,r.Z)(s,"id",6),(0,r.Z)(s,"name","柴油发电机组"),(0,r.Z)(s,"id",7),(0,r.Z)(s,"name","蓄电池"),(0,r.Z)(s,"id",8),(0,r.Z)(s,"name","UPS主机"),(0,r.Z)(s,"id",9),(0,r.Z)(s,"name","UPS变换器"),(0,r.Z)(s,"id",10),(0,r.Z)(s,"name","UPS逆变器"),(0,r.Z)(s,"id",11),(0,r.Z)(s,"name","列头柜"),(0,r.Z)(s,"id",12),(0,r.Z)(s,"name","空调"),(0,r.Z)(s,"id",13),(0,r.Z)(s,"name","温湿度"),(0,r.Z)(s,"id",14),(0,r.Z)(s,"name","氢气探测器"),(0,r.Z)(s,"id",15),(0,r.Z)(s,"name","水浸"),[{id:1,name:"北向开关"},{id:2,name:"东向开关"},{id:3,name:"西向开关"},{id:4,name:"南向开关"},{id:5,name:"温度计"}]),o=function(e,t,a){e.required||void 0!==t&&""!==t||a(),""===t||!Number.isInteger(+t)||+t<0?a(new Error("请输入整数值")):a()},u=function(e,t,a){""===t||isNaN(t)||Number(t)<0?a(new Error("请输入非负数字")):a()}},57509:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-config"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"邮箱配置",name:"mail-config",lazy:""}},[a("mail-config")],1),a("el-tab-pane",{attrs:{label:"短信配置",name:"sms-config",lazy:""}},[a("sms-config")],1),a("el-tab-pane",{attrs:{label:"语音配置",name:"voice-config",lazy:""}},[a("voice-config")],1),a("el-tab-pane",{attrs:{label:"微信配置",name:"wechat-config",lazy:""}}),a("el-tab-pane",{attrs:{label:"钉钉配置",name:"dingding-config",lazy:""}})],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showPage?s("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():s("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?s("div",{staticClass:"head"},[s("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[s("el-form-item"),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.handleDialog()}}},[s("i",{staticClass:"el-icon-plus"})])],1)],1)],1):e._e(),e.hasAuth?s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"empty-text":" ",height:"100%",stripe:"",border:"",data:e.listData}},[s("el-table-column",{attrs:{prop:"smtp",label:"邮箱服务器"}}),s("el-table-column",{attrs:{prop:"auth",label:"是否验证"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.auth?s("span",[e._v("验证")]):s("span",[e._v("不验证")])]}}],null,!1,741748682)}),s("el-table-column",{attrs:{prop:"email",label:"邮箱地址"}}),s("el-table-column",{attrs:{prop:"username",label:"邮箱用户名"}}),s("el-table-column",{attrs:{prop:"remark",label:"描述"}}),s("el-table-column",{attrs:{label:"状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleStatusChange(t,a)}},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"row.status"}})]}}],null,!1,462391612)}),s("el-table-column",{attrs:{label:"操作",align:"center",width:"161"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-button",{attrs:{title:"编辑",icon:"el-icon-edit-outline",type:"primary",plain:""},on:{click:function(t){return e.handleDialog(a)}}}),s("el-button",{attrs:{title:"删除",icon:"el-icon-delete",type:"primary",plain:""},on:{click:function(t){return e.handleDel(a.id)}}})]}}],null,!1,1998501215)})],1):e._e(),s("el-dialog",{attrs:{visible:e.dialog.visible,top:"20vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[s("div",{staticClass:"el-dialog-title-custom",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"title-txt"},[e._v(e._s(e.dialog.forms.id?"编辑":"新增"))]),s("img",{attrs:{src:a(1612)}})]),s("el-form",{ref:"dialogForm",attrs:{model:e.dialog.forms,rules:e.dialog.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"邮箱服务器",prop:"smtp"}},[s("el-input",{model:{value:e.dialog.forms.smtp,callback:function(t){e.$set(e.dialog.forms,"smtp",t)},expression:"dialog.forms.smtp"}})],1),s("el-form-item",{attrs:{label:"是否验证",prop:"auth"}},[s("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.dialog.forms.auth,callback:function(t){e.$set(e.dialog.forms,"auth",t)},expression:"dialog.forms.auth"}},[s("el-radio",{attrs:{border:"",label:1}},[e._v("验证")]),s("el-radio",{attrs:{border:"",label:2}},[e._v("不验证")])],1)],1),s("el-form-item",{attrs:{label:"邮箱地址",prop:"email"}},[s("el-input",{model:{value:e.dialog.forms.email,callback:function(t){e.$set(e.dialog.forms,"email",t)},expression:"dialog.forms.email"}})],1),s("el-form-item",{attrs:{label:"邮箱用户名",prop:"username"}},[s("el-input",{model:{value:e.dialog.forms.username,callback:function(t){e.$set(e.dialog.forms,"username",t)},expression:"dialog.forms.username"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.dialog.forms.password,callback:function(t){e.$set(e.dialog.forms,"password",t)},expression:"dialog.forms.password"}})],1),e.dialog.forms.id?e._e():s("el-form-item",{attrs:{label:"状态",prop:"status"}},[s("el-radio-group",{staticClass:"radio-status",staticStyle:{width:"100%"},model:{value:e.dialog.forms.status,callback:function(t){e.$set(e.dialog.forms,"status",t)},expression:"dialog.forms.status"}},[s("el-radio",{staticStyle:{color:"#55fb55"},attrs:{border:"",label:1}},[e._v("启用")]),s("el-radio",{staticStyle:{color:"gray"},attrs:{border:"",label:0}},[e._v("禁用")])],1)],1),s("el-form-item",{attrs:{label:"描述",prop:"remark"}},[s("el-input",{model:{value:e.dialog.forms.remark,callback:function(t){e.$set(e.dialog.forms,"remark",t)},expression:"dialog.forms.remark"}})],1)],1),s("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("保 存")])],1)],1)],1):e._e()},n=[],l=a(12516),o=(a(23087),a(10405),a(87130)),u=a(97595),m={components:{pagination:o.Z},data:function(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,dialog:{id:"",visible:!1,forms:{},rules:{smtp:[{required:!0,trigger:"blur",message:"请输入"}],auth:[{required:!0,trigger:"blur",message:"请输入"}],email:[{required:!0,trigger:"blur",message:"请输入"}],username:[{required:!0,trigger:"blur",message:"请输入"}],password:[{required:!0,trigger:"blur",message:"请输入"}],status:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},created:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.handleQuery();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{handleStatusChange:function(e,t){var a=this;(0,u.h8)({id:t.id,status:e}).then((function(e){a.getList()})).catch((function(a){t.status=0===e?1:0}))},dialogSubmit:function(){var e=this;this.$refs["dialogForm"].validate((function(t,a){if(!t)return!1;var s=null;s=e.dialog.forms.id?u.IJ:u.HU,s(e.dialog.forms).then((function(t){e.$message.success("操作成功!"),e.$refs["dialogForm"].resetFields(),e.dialog.visible=!1,e.getList()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleReset:function(e){document.activeElement.blur(),this.$refs[e].resetFields(),this.handleQuery()},handleDialog:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=7;break}return a.next=3,(0,u.ci)({id:e.id});case 3:s=a.sent,t.dialog.forms=s.data,a.next=8;break;case 7:t.dialog.forms={status:1,auth:2};case 8:t.dialog.visible=!0,t.$nextTick((function(e){return t.$refs["dialogForm"].clearValidate()}));case 10:case"end":return a.stop()}}),a)})))()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,u.K4)({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,u.Qd)().then((function(t){e.hasAuth=!0,e.listData=t.data,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},d=m,c=a(35471),f=(0,c.Z)(d,i,n,!1,null,"376512ce",null),p=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签名",prop:"sms_sign"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_sign,callback:function(t){e.$set(e.forms,"sms_sign",t)},expression:"forms.sms_sign"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板ID",prop:"sms_template_id"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_template_id,callback:function(t){e.$set(e.forms,"sms_template_id",t)},expression:"forms.sms_template_id"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"应用ID",prop:"sms_sdk_appid"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_sdk_appid,callback:function(t){e.$set(e.forms,"sms_sdk_appid",t)},expression:"forms.sms_sdk_appid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"SecretID",prop:"sms_secretId"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_secretId,callback:function(t){e.$set(e.forms,"sms_secretId",t)},expression:"forms.sms_secretId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"SecretKey",prop:"sms_secretKey"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_secretKey,callback:function(t){e.$set(e.forms,"sms_secretKey",t)},expression:"forms.sms_secretKey"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"EndPoint地址",prop:"sms_endpoint"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sms_endpoint,callback:function(t){e.$set(e.forms,"sms_endpoint",t)},expression:"forms.sms_endpoint"}})],1)],1)],1)],1):e._e()],1):e._e()},h=[],b=(a(17822),a(41849)),v={components:{pagination:o.Z},data:function(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{sms_sign:[{required:!0,tiggter:"blur",message:"请输入"}],sms_template_id:[{required:!0,tiggter:"blur",message:"请输入"}],sms_sdk_appid:[{required:!0,tiggter:"blur",message:"请输入"}],sms_secretId:[{required:!0,tiggter:"blur",message:"请输入"}],sms_secretKey:[{required:!0,tiggter:"blur",message:"请输入"}],sms_endpoint:[{required:!0,tiggter:"blur",message:"请输入"}]},dialog:{id:"",visible:!1,forms:{},rules:{name:[{required:!0,trigger:"blur",message:"请输入"}],permission:[{required:!0,trigger:"blur",message:"请输入"}],menuType:[{required:!0,trigger:"change",message:"请输入"}],firstMenuId:[{required:!0,trigger:"blur",message:"请输入"}],secondMenuId:[{required:!0,trigger:"blur",message:"请输入"}],thirdMenuId:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},created:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.handleQuery();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{handleSubmit:function(){var e=this;this.$refs["forms"].validate((function(t,a){if(!t)return!1;(0,u.H9)(e.forms).then((function(t){e.$message.success("操作成功!"),e.handleQuery()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleDialog:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialog.forms=e?Object.assign(JSON.parse(JSON.stringify(e))):{},t.dialog.visible=!0,t.$nextTick((function(e){return t.$refs["dialogForm"].clearValidate()}));case 3:case"end":return a.stop()}}),a)})))()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){alertLevelDelete({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,u.hk)().then((function(t){e.hasAuth=!0,e.forms=t.data,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},_=v,y=(0,c.Z)(_,g,h,!1,null,"7837a80b",null),w=y.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showPage?a("div",{staticClass:"auth-manage"},[e.hasAuth?e._e():a("h2",{staticClass:"auth-tip"},[e._v("权限不足,请联系管理员")]),e.hasAuth?a("div",{staticClass:"head"},[a("el-form",{ref:"filterForm",staticStyle:{display:"grid","grid-auto-flow":"column"},attrs:{inline:!0,size:"medium",model:e.filterForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 保存 ")])],1)],1)],1):e._e(),e.hasAuth?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"forms",attrs:{model:e.forms,rules:e.rules,inline:"","label-width":"200px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"应用ID",prop:"sound_appid"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_appid,callback:function(t){e.$set(e.forms,"sound_appid",t)},expression:"forms.sound_appid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板ID",prop:"sound_template_id"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_template_id,callback:function(t){e.$set(e.forms,"sound_template_id",t)},expression:"forms.sound_template_id"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"AppKey",prop:"sound_appkey"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_appkey,callback:function(t){e.$set(e.forms,"sound_appkey",t)},expression:"forms.sound_appkey"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"语音请求地址",prop:"sound_url"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.forms.sound_url,callback:function(t){e.$set(e.forms,"sound_url",t)},expression:"forms.sound_url"}})],1)],1)],1)],1):e._e()],1):e._e()},x=[],$={components:{pagination:o.Z},data:function(){return{showPage:!1,hasAuth:!0,depOpts:[],firstMenuOpts:[],secondMenuOpts:[],thirdMenuOpts:[],filterForm:{pageNo:1,pageSize:10},listLoading:!0,listData:[],listTotal:0,remouldAspirationOption:[],forms:{},rules:{sound_appid:[{required:!0,tiggter:"blur",validator:b.C0}],sound_template_id:[{required:!0,tiggter:"blur",validator:b.C0}],sound_appkey:[{required:!0,tiggter:"blur",message:"请输入"}],sound_url:[{required:!0,tiggter:"blur",message:"请输入"}]},dialog:{id:"",visible:!1,forms:{},rules:{name:[{required:!0,trigger:"blur",message:"请输入"}],permission:[{required:!0,trigger:"blur",message:"请输入"}],menuType:[{required:!0,trigger:"change",message:"请输入"}],firstMenuId:[{required:!0,trigger:"blur",message:"请输入"}],secondMenuId:[{required:!0,trigger:"blur",message:"请输入"}],thirdMenuId:[{required:!0,trigger:"blur",message:"请输入"}]}}}},watch:{},created:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.handleQuery();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{handleSubmit:function(){var e=this;this.$refs["forms"].validate((function(t,a){if(!t)return!1;(0,u.kq)(e.forms).then((function(t){e.$message.success("操作成功!"),e.handleQuery()}))}))},handleQuery:function(){this.listTotal=0,this.filterForm.pageNo=1,this.getList()},handleDialog:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialog.forms=e?Object.assign(JSON.parse(JSON.stringify(e))):{},t.dialog.visible=!0,t.$nextTick((function(e){return t.$refs["dialogForm"].clearValidate()}));case 3:case"end":return a.stop()}}),a)})))()},handleDel:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){alertLevelDelete({id:e}).then((function(e){t.getList(),t.$message.success("删除成功!")}))})).catch((function(){}))},getList:function(){var e=this;this.listLoading=!0,(0,u.go)().then((function(t){e.hasAuth=!0,e.forms=t.data,e.listLoading=!1})).catch((function(t){e.hasAuth=!1})).finally((function(t){e.showPage=!0}))}}},Z=$,S=(0,c.Z)(Z,k,x,!1,null,"6f6d9d9e",null),q=S.exports,C={components:{mailConfig:p,smsConfig:w,voiceConfig:q},data:function(){return{activeName:"mail-config"}},methods:{handleClick:function(e,t){}}},L=C,D=(0,c.Z)(L,s,r,!1,null,"7060ea45",null),N=D.exports}}]);